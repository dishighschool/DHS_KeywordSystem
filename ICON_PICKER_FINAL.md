# 🎨 Icon Picker 最終版本 - 使用指南

## ✅ 已修正的問題

### 1. 圖示預覽定位問題 ✅
**問題：** 預覽圖示位置跑掉，不在輸入框內

**解決方案：**
- 創建 `.icon-picker-wrapper` 包裝容器
- 使用絕對定位將預覽固定在輸入框左側
- 動態調整輸入框的 `padding-left` 避免文字覆蓋圖示

### 2. 允許用戶自訂輸入 ✅
**新功能：**
- ✨ 點擊「自訂輸入」按鈕可手動輸入圖示代碼
- ✨ 輸入框會自動解除唯讀狀態
- ✨ 支援任何 Bootstrap Icons 代碼（包括不在列表中的）
- ✨ 即時預覽手動輸入的圖示

## 🚀 使用方式

### 方式 1：從列表選擇（推薦）
1. 點擊輸入框
2. 彈出圖示選擇器
3. 搜尋或瀏覽圖示
4. 點擊選擇

### 方式 2：自訂輸入
1. 點擊輸入框彈出選擇器
2. 點擊「自訂輸入」按鈕
3. 手動輸入完整的圖示代碼（如 `bi-house-fill`）
4. 預覽會即時更新

### 方式 3：直接輸入（最快）
1. 如果你知道圖示代碼
2. 直接在輸入框輸入（會自動解鎖）
3. 輸入完成後按 Enter 或點擊其他地方

## 🎯 新增功能

### 📝 自訂輸入按鈕
```
位置：圖示選擇器底部
功能：解除輸入框唯讀，允許手動輸入
圖示：<i class="bi bi-pencil"></i>
```

### 💡 使用提示
選擇器頂部會顯示：
```
💡 提示：可直接在輸入框輸入自訂圖示代碼（如 bi-house）
```

### 🔄 智能狀態切換
- **選擇模式**：輸入框為唯讀，點擊彈出選擇器
- **輸入模式**：解除唯讀，可自由輸入
- **選擇後**：自動返回唯讀模式

## 🎨 視覺改進

### 預覽徽章定位
```css
✅ 絕對定位在包裝容器內
✅ 垂直居中對齊
✅ 不影響輸入框布局
✅ 動畫過渡效果
```

### 輸入框調整
```css
✅ 有圖示時：padding-left: 2.5rem
✅ 無圖示時：padding-left: 0.75rem
✅ 平滑過渡動畫
```

## 📋 支援的圖示代碼格式

✅ `bi-house`
✅ `bi-house-fill`
✅ `bi-arrow-up-circle`
✅ 任何有效的 Bootstrap Icons 類別名稱

⚠️ 注意：必須包含 `bi-` 前綴

## 🔧 技術細節

### 包裝結構
```html
<div class="icon-picker-wrapper">
  <span class="icon-preview-badge">
    <i class="bi bi-house"></i>
  </span>
  <input type="text" class="form-control icon-picker-input" value="bi-house">
</div>
```

### 初始化檢查
```javascript
// 避免重複初始化
if (!input.dataset.iconPickerInit && !input.closest('.icon-picker-wrapper')) {
  new SimpleIconPicker(input);
  input.dataset.iconPickerInit = 'true';
}
```

### 事件處理
```javascript
// 監聽 input 事件以支援手動輸入
this.input.addEventListener('input', () => {
  this.updateInputPreview();
});
```

## 🎬 測試步驟

### 測試 1：從列表選擇
```
1. 前往網站設定 > 頁首設定
2. 點擊「新增導航連結」
3. 點擊「圖示」輸入框
4. 搜尋 "home" 並選擇
5. ✅ 確認左側出現圖示預覽
6. ✅ 確認輸入框顯示 "bi-home"
```

### 測試 2：自訂輸入
```
1. 點擊「圖示」輸入框
2. 點擊「自訂輸入」按鈕
3. 輸入 "bi-rocket-takeoff-fill"
4. ✅ 確認預覽即時更新為火箭圖示
5. ✅ 確認輸入框可編輯
```

### 測試 3：直接輸入
```
1. 在任何圖示輸入框
2. 開始輸入（如 "bi-star-fill"）
3. ✅ 確認輸入時預覽即時更新
4. ✅ 確認圖示正確顯示
```

### 測試 4：清除功能
```
1. 選擇任何圖示
2. 重新點擊輸入框
3. 點擊「清除」按鈕
4. ✅ 確認輸入框清空
5. ✅ 確認預覽消失
```

### 測試 5：Modal 中使用
```
1. 點擊「編輯」現有導航連結
2. 在 Modal 中點擊圖示輸入框
3. ✅ 確認選擇器正常彈出
4. ✅ 確認所有功能正常運作
```

## 🐛 故障排除

### 預覽位置不對
```
清除瀏覽器快取 (Ctrl+F5)
確認 icon-picker-simple.css 已載入
```

### 無法輸入
```
點擊「自訂輸入」按鈕
或等待選擇一個圖示後會自動鎖定
```

### 圖示不顯示
```
確認輸入的代碼包含 "bi-" 前綴
確認 Bootstrap Icons CSS 已載入
```

## 🎉 功能總結

✅ 點擊輸入框彈出選擇器
✅ 搜尋功能
✅ 視覺化圖示預覽（在輸入框內）
✅ 自訂輸入按鈕
✅ 手動輸入支援
✅ 即時預覽更新
✅ 清除功能
✅ Modal 中正常運作
✅ 響應式設計
✅ 防止重複初始化

## 📊 改進對比

### 之前 ❌
- 預覽位置飄忽不定
- 只能從列表選擇
- 無法輸入自訂代碼

### 現在 ✅
- 預覽固定在輸入框左側
- 可從列表選擇 OR 自訂輸入
- 支援任何 Bootstrap Icons 代碼
- 即時預覽更新

現在 Icon Picker 功能完整，使用體驗流暢！🚀
